window.MLongArticle={settings:{theme:"light",fontSize:16},init:function(){this.loadSettings(),this.bindEvents(),this.applySettings()},loadSettings:function(){var t=localStorage.getItem("mLongArticleSettings");if(t)try{this.settings=JSON.parse(t)}catch(t){console.error("Failed to parse settings",t)}},saveSettings:function(){localStorage.setItem("mLongArticleSettings",JSON.stringify(this.settings))},applySettings:function(){var t=document.body,e=document.querySelector(".m-long-article-content");"night"===this.settings.theme?t.classList.add("night"):t.classList.remove("night"),e&&(e.style.fontSize=this.settings.fontSize+"px");var n=document.getElementById("mFontSizeValue");n&&(n.textContent=this.settings.fontSize+"px")},bindEvents:function(){document.addEventListener("click",function(t){var e=document.getElementById("mSettingsPanel"),n=document.querySelector('.m-action-btn[onclick*="openSettings"]');e&&e.classList.contains("active")&&(e.contains(t.target)||n&&n.contains(t.target)||e.classList.remove("active"))})},openSettings:function(){var t=document.getElementById("mSettingsPanel");t&&t.classList.toggle("active")},setTheme:function(t){this.settings.theme=t,this.saveSettings(),this.applySettings();var e=document.querySelector(".m-theme-btn.light"),n=document.querySelector(".m-theme-btn.night");e&&e.classList.toggle("active","light"===t),n&&n.classList.toggle("active","night"===t)},setFontSize:function(t){var e=this.settings.fontSize+t;e>=12&&e<=24&&(this.settings.fontSize=e,this.saveSettings(),this.applySettings())},toggleNight:function(){this.setTheme("night"===this.settings.theme?"light":"night")}};