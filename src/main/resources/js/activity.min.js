var Activity={bet1A0001:function(e){var t={smallOrLarge:$("input[name=smallOrLarge]:checked").val(),amount:$("input[name=amount]:checked").val()};$.ajax({url:Label.servePath+"/activity/1A0001/bet",type:"POST",headers:{csrfToken:e},cache:!1,data:JSON.stringify(t),success:function(e,t){(0===e.code?($("#betDiv, #betBtn").remove(),$("#tip").addClass("succ").removeClass("error")):$("#tip").addClass("error").removeClass("succ")).html("<ul><li>"+e.msg+"</li></ul>"),$("#tip").show(),setTimeout(function(){$("#tip").hide()},3e3)}})},collect1A0001:function(){$.ajax({url:Label.servePath+"/activity/1A0001/collect",type:"POST",cache:!1,data:JSON.stringify({}),success:function(e,t){$("#tip").show(),0===e.code?($("#tip").addClass("succ").removeClass("error").html("<ul><li>"+e.msg+"</li></ul>"),$("#collectBtn").remove()):($("#tip").addClass("error").removeClass("succ").html("<ul><li>"+e.msg+"</li></ul>"),setTimeout(function(){$("#tip").hide()},3e3))}})},charInit:function(e){var e=document.getElementById(e),t=e.getContext("2d"),n=(t.strokeStyle="#000",t.lineWidth=5,t.lineJoin=t.lineCap="round",t.shadowBlur=5,!(t.shadowColor="rgb(0, 0, 0)")),a=0,o=0;e.onmousedown=function(e){n=!0,t.beginPath(),a=e.clientX-e.target.offsetLeft+$(window).scrollLeft(),o=e.clientY-e.target.offsetTop+$(window).scrollTop(),t.moveTo(a,o)},e.onmousemove=function(e){n&&(a=e.clientX-e.target.offsetLeft+$(window).scrollLeft(),o=e.clientY-e.target.offsetTop+$(window).scrollTop(),t.lineTo(a,o),t.stroke())},e.onmouseup=function(){n=!1},e.addEventListener("touchstart",function(e){t.beginPath(),a=e.changedTouches[0].pageX-e.target.offsetLeft,o=e.changedTouches[0].pageY-e.target.offsetTop,t.moveTo(a,o)},!1),e.addEventListener("touchmove",function(e){e.preventDefault(),a=e.changedTouches[0].pageX-e.target.offsetLeft,o=e.changedTouches[0].pageY-e.target.offsetTop,t.lineTo(a,o),t.stroke()},!1)},submitCharacter:function(e){e={dataURL:document.getElementById(e).toDataURL(),character:$("h2.fn-inline a").text()};$.ajax({url:Label.servePath+"/activity/character/submit",type:"POST",cache:!1,data:JSON.stringify(e),beforeSend:function(){var e=$("button.green");e.attr("disabled","disabled").css("opacity","0.3").text(e.text()+"ing")},success:function(e,t){Util.alert(e.msg),0===e.code&&window.location.reload()},complete:function(){var e=$("button.green");e.removeAttr("disabled").css("opacity","1").text(e.text().substr(0,e.text().length-3))}})},clearCharacter:function(e){e=document.getElementById(e).getContext("2d");e.clearRect(0,0,e.canvas.width,e.canvas.height)},initSnake:function(){EatingSnake.initMap("snakeCanvas")},startSnake:function(e){confirm(Label.activityStartEatingSnakeTipLabel)&&($(document).unbind("keyup"),EatingSnake.start(e),document.onkeydown=function(e){e=e||window.event;EatingSnake.input(e.keyCode)})}};