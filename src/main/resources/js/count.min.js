var Count={generateInterval:setInterval(function(){}),data:{},time:"",init:function(){data=JSON.parse(localStorage.getItem("count")),null===data&&(localStorage.setItem("count","{}"),data={}),"disabled"!==data.status&&(Count.initStyle(),Count.initHtml(),Count.time=void 0===data.time?"1800":data.time,Count.lunch=void 0===data.lunch?"1130":data.lunch,Count.start())},initHtml:function(){var t=document.createElement("div");t.setAttribute("class","time_content"),t.setAttribute("id","timeContent"),void 0!==data.left&&void 0!==data.top&&document.documentElement.clientHeight>data.top&&document.documentElement.clientWidth>data.left&&t.setAttribute("style","left:"+data.left+"px;top:"+data.top+"px;"),t.innerHTML="<a class='time_box' id='countRemainBox'>距离下班:<br><span id='countRemain'></span></a>";var e=document.body.firstChild;document.body.insertBefore(t,e);let a=document.getElementById("timeContent");a.onmousedown=t=>{let n=t.clientX-a.offsetLeft,o=t.clientY-a.offsetTop,i,l;document.onmousemove=function(t){var e=t.clientX-n,t=t.clientY-o;i=e,l=t,data.left=e,data.top=t,Count.save(),0<=e&&e<=window.innerWidth-a.offsetWidth&&(a.style.left=e+"px"),0<=t&&t<=window.innerHeight-a.offsetHeight&&(a.style.top=t+"px")},document.onmouseup=function(t){document.onmousemove=null,document.onmouseup=null,void 0===i&&void 0===l&&Count.settings()}}},initStyle:function(){let t=document.createElement("style");t.innerHTML=".time_content {   position: fixed;   top: 60px;   right: 24px;   width: 80px;   z-index: 1999;}.time_content a.time_box:hover {   background-color: rgb(252 252 252 / 96%);}.time_content a.time_box {   position: relative;   display: -webkit-box;   display: -ms-flexbox;   display: flex;   -webkit-box-orient: vertical;   -webkit-box-direction: normal;   -ms-flex-direction: column;   flex-direction: column;   -webkit-box-align: center;   -ms-flex-align: center;   align-items: center;   -webkit-box-pack: center;   -ms-flex-pack: center;   justify-content: center;   border-radius: 50%;   background: #000;   -webkit-box-shadow: 0 2px 4px 0 rgb(0 0 0 / 5%);   box-shadow: 0 2px 4px 0 rgb(0 0 0 / 5%);   background-color: #fff;   text-align: center;   height: 75px;   cursor: pointer;   margin-top: 8px;   text-decoration: none;   color: #616161;   -moz-user-select: none;   -ms-user-select: none;   -webkit-user-select: none;   user-select: none;}",document.body.appendChild(t)},generate:function(){var t=(new Date).getFullYear();let e=(new Date).getMonth()+1,n=(new Date).getDate();e<10&&(e="0"+e),n<10&&(n="0"+n);t=t+"-"+e+"-"+n;let o="18",i="00";3===Count.time.length?(o="0"+Count.time.substr(0,1),i=Count.time.substr(1,2)):4===Count.time.length&&(o=Count.time.substr(0,2),i=Count.time.substr(2,2));let l=t+" "+o+":"+i+":00",a=new Date(l.replace(/-/g,"/")),u=new Date,s="11",c="30";3===Count.lunch.length?(s="0"+Count.lunch.substr(0,1),c=Count.lunch.substr(1,2)):4===Count.lunch.length&&(s=Count.lunch.substr(0,2),c=Count.lunch.substr(2,2));let d=t+" "+s+":"+c+":00",r=new Date(d.replace(/-/g,"/"));u.toString()===r.toString()&&Util.notice("success",15e3,"中午咯，该订饭啦～");t=a.getTime()-u.getTime();let m=Math.floor(t/36e5%24),f=Math.floor(t/6e4%60),g=Math.floor(t/1e3%60);0<=m&&0<=f&&0<=g?(m<10&&(m="0"+m),f<10&&(f="0"+f),g<10&&(g="0"+g),t=m+":"+f+":"+g,"00"===m&&"02"===f&&"00"===g&&Util.notice("danger",3e3,"马上就要下班啦，赶快收拾收拾吧～"),"00"===m&&"00"===f&&"00"===g&&Util.notice("success",3e3,"下班了！下班了！下班了！！！"),document.getElementById("countRemain").innerText=t):(document.getElementById("countRemainBox").innerText="下班\n时间到 🎉",clearInterval(Count.generateInterval))},start:function(){Count.generate(),Count.generateInterval=setInterval(function(){Count.generate()},1e3)},save:function(){localStorage.setItem("count",JSON.stringify(data))},settings:function(){Util.alert('<div class="form fn__flex-column">\n<label>\n  <div class="ft__smaller ft__fade" style="float: left">状态（关闭后可点击右上角头像找到下班倒计时设定）</div>\n  <div class="fn-hr5 fn__5"></div>\n  <select id="countSettingStatus">\n  <option value="enabled" selected>开启</option>  <option value="disabled">关闭</option>  </select>\n</label>\n<label>\n  <div class="ft__smaller ft__fade" style="float: left">下班时间</div>\n  <div class="fn-hr5 fn__5"></div>\n  <input id="countSettingsTime" type="time"/>\n</label>\n<label>\n  <div class="ft__smaller ft__fade" style="float: left">订饭时间</div>\n  <div class="fn-hr5 fn__5"></div>\n  <input id="lunchSettingsTime" type="time"/>\n</label>\n<div class="fn-hr5"></div>\n<div class="fn__flex" style="margin-top: 15px">\n<div class="fn__flex-1 fn__flex-center" style="text-align: left;"></div>\n  <button class="btn btn--confirm" onclick=\'Count.saveSettings()\'>保存</button>\n</div>\n</div>',"下班倒计时设定"),setTimeout(function(){let t="18",e="00";3===Count.time.length?(t="0"+Count.time.substr(0,1),e=Count.time.substr(1,2)):4===Count.time.length&&(t=Count.time.substr(0,2),e=Count.time.substr(2,2)),document.getElementById("countSettingsTime").value=t+":"+e;let n="11",o="30";switch(3===Count.lunch.length?(n="0"+Count.lunch.substr(0,1),o=Count.lunch.substr(1,2)):4===Count.lunch.length&&(n=Count.lunch.substr(0,2),o=Count.lunch.substr(2,2)),document.getElementById("lunchSettingsTime").value=n+":"+o,data.status){case"enabled":document.getElementById("countSettingStatus").value="enabled";break;case"disabled":document.getElementById("countSettingStatus").value="disabled"}},500)},saveSettings:function(){var t=document.getElementById("countSettingsTime").value.replace(":","");""!==t&&(data.time=""+t);t=document.getElementById("lunchSettingsTime").value.replace(":","");""!==t&&(data.lunch=""+t),data.status=document.getElementById("countSettingStatus").value,Count.save(),Util.closeAlert(),location.reload()}};$(document).ready(function(){Count.init()});